<!doctype html>
<html>

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, minimum-scale=1, user-scalable=no, viewport-fit=cover">
    <title>game</title>
    <script defer src="//sdk.pgasia-cdn.com/main.min.js"></script>
</head>
<style type="text/css">
    * {
        margin: 0;
    }

    html {
        font-size: 20px;
    }

    @media only screen and (min-width: 401px) {
        html {
            font-size: 25px !important;
        }
    }

    @media only screen and (min-width: 428px) {
        html {
            font-size: 26.75px !important;
        }
    }

    @media only screen and (min-width: 481px) {
        html {
            font-size: 30px !important;
        }
    }

    @media only screen and (min-width: 569px) {
        html {
            font-size: 35px !important;
        }
    }

    @media only screen and (min-width: 641px) {
        html {
            font-size: 40px !important;
        }
    }

    html,
    body {
        width: 100%;
        height: 100%;
        overflow: hidden;
    }

    div {
        width: 100%;
        height: 100%;
        position: relative
    }

    iframe {
        width: 100vw;
        height: 100vh
    }

    .my-alert {
        display: none;
        text-align: center;
        width: 8.68rem;
        height: 4.38rem;
        background: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAA2QAAAG2CAMAAAAnX7X3AAAABGdBTUEAALGPC/xhBQAAAAFzUkdCAK7OHOkAAAAPUExURTQ0NDQ0NCIiIhYWFjc3N5te4vwAAAACdFJOU8kOixOMOAAABBlJREFUeNrt1TEOg0AMRcE18f3PnAXqkChri4KZwgf40pNHDKBLTFaA5srmTaDFWdk8my2gr7MjMqBDbuczExl0hiYyaCYyEBmIDBAZiAxEBogMRAYiA0QGIgNEBiIDkQEiA5GByACRgchAZCIDkYHIAJGByEBkgMhAZCAyQGQgMkBkIDIQGSAyEBmIDBAZiAxEJjIQGYgMEBmIDEQGiAxEBiIDRAYiA0QGIgORASIDkYHIAJGByEBkIgORgcgAkYHIQGSAyEBkIDJAZCAyQGQgMhAZIDIQGYjsBfzmv8jsBuuZXURmM6jITGTQXNnnyOwFvZGZC2oqExncFJmxoKgykYHIQGSAyEBkIDJAZCAyEJnIQGQgMhCZyEBkIDJAZCAyEBkgMhAZiExkIDIQGSAyEBmIDBAZiAxEJjIQGYgMRCYyEBmIDBAZiAxEBogMRAYiExmIDEQGiAxEBiIDRAYiA5GJDEQGIgORiQxEBiIDRAYiA5EBIgORgchEBiIDkQEiA5GByACRgchAZCIDkYHIQGQiA5GByACRgchAZIDIQGQgMpGByEBkgMhAZCAyQGQgMhCZyEBkIDIQmchAZCAyQGQgMhAZIDIQGYhMZCAyEBkgMhAZiAwQGYgMRCYyEBmIDEQmMhAZiAwQGYgMRAaIDEQGIhMZiAxEBogMRAYiA0QGIgORiQxEBiIDkYkMRAYiA0QGIgORASIDkYHIRAYiA5EBIgORgcgAkYHIQGQiA5GByEBkIgORgcgAkYHIQGSAyEBkIDKRgchAZIDIQGQgMkBkIDIQmchAZCAyEJnIQGQgMkBkIDIQGSAyEBmITGQgMhAZIDIQGYgMEBmIDEQmMhAZiAxEJjIQGYgMEBmIDEQGiAxEBiITGYgMRAYiExmIDEQGiAxEBiKzFYgMRAYiExmIDEQGiAxEBiIDRAYiA5GJDEQGIgORiQxEBiIDRAYiA5EBIgORgchEBiIDkQEiA5GByACRgchAZCIDkYHIQGQiA5HBIyJTGdQ0JjK4LTKVQUljIoP7IlMZFCR2GZnMoKCx68hkBquJfY0MWCUyEBmIDBAZiAxEBogMRAYiA0QGIgNEBiIDkQEiA5GByACRgchAZCIDkYHIAJGByEBkgMhAZCAyQGQgMkBkIDIQGSAyEBmIDBAZiAxEJjIQGYgMEBmIDEQGiAxEBiIDRAYiA0QGIgORASIDkYHIAJGByEBkIgORgcgAkYHIQGSAyEBkIDJAZCAyQGQgMhAZIDIQGYgMEBmIDEQmMhAZiAwQGYgMRAaIDEQGIgNEBiIDRAYiA5EBIgORgcgAkYHIQGRmAJGByACRgchAZIDIQGTwxMjSDtAlh1cG7Y3FfGXpmUFHYpl7YhHjyAwot7+xPbIYQJM4I1MZ9DUWbwiXp2ZQKfdYAAAAAElFTkSuQmCC);
        background-repeat: no-repeat;
        background-size: 100% 100%;
        -moz-background-size: 100% 100%;
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        -moz-transform: translate(-50%, -50%);
        -webkit-transform: translate(-50%, -50%);
        -o-transform: translate(-50%, -50%);
    }

    .close-icon {
        display: inline-block;
        width: 0.47rem;
        height: 0.48rem;
        background: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAC8AAAAwCAMAAAC2edPQAAAABGdBTUEAALGPC/xhBQAAAAFzUkdCAK7OHOkAAAAYUExURUdwTI4cHI4cHI4cHI4cHI4cHI4cHI4cHEvMGKQAAAAIdFJOUwD/6iu+QI1qimLkSQAAAOlJREFUSMed1UkSwyAMRFGEAd3/xgkeQUjdcbyj6r8NQUpK+7cl9k1FyQxUaUMuQkAVecA3J6DnN9hzCI78BGcOwJXvoN2HCDy5iKYtEzDmpV8sBjYnYM0h8HIA/DwEUR6AOHcByh2A8wWw3ACl+Qx+yANQ0JDmV7kDClsD+VVuAM+nexe6Zuacg2qvB4O6Xj8C1ft5Y+DmMZheZGVrxj5gtpeW946BMx4IuNMUg2D4IhDOqg/AaHsAboIVkMVhAd0zBjQ6TSPQ4Q+s8BHVfmx0Vi+gx7HR0T6AXsdGN0EH+hxb4WtG0z/fB9PvBi3giAvSAAAAAElFTkSuQmCC) no-repeat;
        background-size: 100% 100%;
        -moz-background-size: 100% 100%;
        position: absolute;
        right: 2%;
        top: 5%;
    }

    .alert-context {
        color: #fff;
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        -moz-transform: translate(-50%, -50%);
        -webkit-transform: translate(-50%, -50%);
        -o-transform: translate(-50%, -50%);
    }

    .clearFix:after {
        content: "";
        height: 0;
        line-height: 0;
        display: block;
        visibility: hidden;
        clear: both
    }

    .clearFix {
        position: absolute;
        bottom: 0;
        left: 0;
        width: 100%;
        height: 0.82rem;
    }

    .alert-cancel {
        float: left;
        margin-left: 10%;
        width: 2.03rem;
        height: 0.66rem;
        background: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMsAAABCCAMAAADOmtIRAAAABGdBTUEAALGPC/xhBQAAAAFzUkdCAK7OHOkAAAAVUExURT4+Pj4+PiwsLD8/PyQkJBoZGVJSUsICHsUAAAACdFJOUwGDGzku4wAAANBJREFUaN7t20EOgzAMRFEnNr3/kRugSIVkW1Uz+uYET/aXYEG0dJkW+TKZzHDZSu/D0k2m3CwemipujL3QC72wFyy/siS9cGNY6IUbw0Iv9IKFXuiFXuiFXrgxeqEXboxe6IUbw0Iv3NhfKT57qdpceqlh6c1iLx9K+GzFwTIkJ0W/l52SB0V+L1+U0N9KXRRxy42i3cudIr2XByV8tqJsmSiyvdT5OhlhsJcFRdQyPldmiqplRTkspfbslBazpQTnejGeLJvgLCnRRP/bWcwbkUFybiQaCGAAAAAASUVORK5CYII=) no-repeat;
        background-size: 100% 100%;
        -moz-background-size: 100% 100%;
        z-index: 999
    }

    .alert-confirm {
        float: right;
        margin-right: 10%;
        width: 2.03rem;
        height: 0.66rem;
        background: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMsAAABCCAMAAADOmtIRAAAABGdBTUEAALGPC/xhBQAAAAFzUkdCAK7OHOkAAAAVUExURUdwTIEFBWYQEIEFBW4dHU0QEHkwMKgxTUMAAAACdFJOUwB0Ift4HQAAALVJREFUaN7t21sKxCAQRFEf3dn/kseQDGNGvwNV3Etv4NAgfmip3aVaehweRR+WiMNihqVFWEw7LS5hwYIFCxYsWLBgwYIFCxYsWLBgwYIFCxYsWLBgwYIFCxYsWLC8V/pYMs93Sj4UC0teFI+9XBQDy3crHpabom/5UeQtE0XckjNF2/KkSFtyXFwmirLlnyJsWSi6lpUia9lQVC07iqZlnMWtLpTSU7K2SlQtW0qpov92Nn0AqAh0BMhO6/IAAAAASUVORK5CYII=) no-repeat;
        background-size: 100% 100%;
        -moz-background-size: 100% 100%;
        z-index: 999
    }

    span {
        font-size: 0.3rem
    }

    .loading {
        display: none;
        position: absolute;
        top: 0;
        width: 100%;
        height: 100%;
        background: rgba(0, 0, 0, .3)
    }

    .loading-img {
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        width: 100px;
        height: 100px;
    }

    .loading .loading-img img {
        width: 100%;
        height: 100%;
    }

    i {
        font-style: normal;
    }
</style>

<body>
    <div>
        <iframe id="iframe" frameborder="0" scrolling="no" style="display:block;"></iframe>
        <div class="my-alert" id="my-alert">
            <i class="close-icon" id="close-icon"></i>
            <span class="alert-context">确认退出游戏?</span>
            <div class="clearFix">
                <i class="alert-cancel" id="alert-cancel" style="position: relative;">
                    <span class="alert-context">取消</span>
                </i>
                <i class="alert-confirm" id="alert-confirm" style="position: relative;">
                    <span class="alert-context">确认</span>
                </i>
            </div>
        </div>
        <div id="loading" class="loading">
            <div class="loading-img">
                <img src="data:image/gif;base64,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">
            </div>
        </div>
    </div>
</body>
<script type="text/javascript">
    function GetQueryString(name) {
        var reg = new RegExp("(^|&)" + name + "=([^&]*)(&|$)");
        var r = window.location.search.substr(1).match(reg);
        if (r != null) return unescape(r[2]); return null;
    }
    var userId = GetQueryString('userId')                       // NA玩家ID
    var homeurl = GetQueryString('homeurl')                     // 返回大厅链接
    var gameurl = decodeURIComponent(GetQueryString('gameurl')) // 进入游戏链接
    var apiurl = (window.location.hostname == 'webpage.risheng3d.com' || window.location.hostname == 'webpage.na77.org') ? 'webgame.na77.org' : 'ext.na77.org'
    var logouturl = 'http://' + apiurl + '/pg/logout/' + userId + '/1090001' + '?homeurl=' + encodeURIComponent(homeurl)
    // 打开具体游戏
    // var iframe = document.getElementById('iframe')
    // iframe.setAttribute('src', decodeURIComponent(gameurl))
    PGSDK.launchGame(gameurl)
    // 弹框
    var myAlert = document.getElementById('my-alert')
    var close = document.getElementById('close-icon')
    var cancel = document.getElementById('alert-cancel')
    var confirm = document.getElementById('alert-confirm')
    var loading = document.getElementById('loading')
    close.onclick = function () {
        myAlert.style.display = 'none';
    }
    cancel.onclick = function () {
        myAlert.style.display = 'none';
    }
    confirm.onclick = function () {
        myAlert.style.display = 'none'
        loading.style.display = 'block'
        window.location.href = logouturl
    }

    // 生成按钮
    var new_element_N = document.createElement("style");
    new_element_N.innerHTML = '#drager {' +
        '   position: fixed;' +
        '   width: 1.3125rem;' +
        '   height: 0.875rem;' +
        '   background-color: rgba(0, 0, 0, 0.5);' +
        '   z-index: 10000;' +
        '   cursor: pointer;' +
        '   top: 300px;' +
        '   left: -300px;' +
        '   border-radius: 30%;' +
        '   padding: 6px;' +
        ' }' +
        ' ' +
        ' #drager>div {' +
        '   border-radius: 50%;' +
        '   width: 100%;' +
        '   height: 100%;' +
        '   background: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGkAAABGCAMAAAD4pkrrAAAABGdBTUEAALGPC/xhBQAAAAFzUkdCAK7OHOkAAAAwUExURUdwTBcXFyYkKSYkKR4dHyYkKSYkKSYkKSUjKCYkKSYkKY+Pj8nJyevr61FRUf///0sC3ucAAAAPdFJOUwDJQCW8FGYOkX5Y4vH61OBqJPMAAANQSURBVFjDtZnbloMwCEUbRaO56P//7QCJrbW5EM0cnb7UNbtAJEBeL7k0XqWPLsL/hZpK0qynQIKMAmkCPoCRNeM4oEz+HgZ8gmhPYJFjzFyUMQGIsHusaNA8r+tS0ooiHsOIdQOFIDMDqIoAtRAtslrN0gxaq5w3jmAmslqDhKBFKbcX5b1z1kKEzc0oChLGaAFld5EcwQCCWU2oA7TtYrkNWcEsOYqDNGOQwO8NcmRXGyoECapB+gmabUNxkExDkL7NakHdCNIVhbnw34L0hTIio+4G6Y1SESX2nd1vyuJiF/iPlwP5bttva5MZpcmku0GKi12phdafrkdpuR2kt/9o/U1Vm8yDIAWjQNUjxWFS4CSy1jqfNaoaKVp60l2JtPlspMqksAMutJGq2s0Pof2Z5VdbE1w+GCof6sIyAtKveHSflpVEZi5e9DGvhEq9ERL3MYrLPIEMsVIrdauTuEKexnDl7vjtGBIXKJ90X/XlPcpxLskzd/gyhDRplChQpxZDZ3uMeMUkCYmMLicJy89hoFrN/75RvUmIIve5xLsrSH2vtnItGShJlmi2iTbo/ye9npFoVU0vWdOQJ4EkSejQwEpQOizzOyTu0FiStkvnV0SFpI8EK2xPdK6Q8mGD19VEPq/cdZUcqGODis5LvE+VHKHj5kT5GWLXlRdPEKida85GIY0NzFG4aYZmsqQhPN2cYWOzzr/R0W9iVP4+tqdkFWrJKenq6O054CoESQs2eLi1Dj9XFA8QANJFC+Re3Og5drqynv0MEKYNlSoiWRvmF/nJc2EduVj7FEVVmPWFgk+XPBfLDycr9qzPNgGpylxfPBda1qqc8+Ue4Oo8ffbcs3r82tfoZClJbzq4PqBo0jcpem4+e66XSdP3sLC753g1/Zh0XnOuF8jD1STcWD+e23w30HadSHwl1G6eY9C1y/2A+nnuA/pso3GEt3b1HE9YlvkyYjmGNh09t9MsjEHj+XSATFq7ei7O98zvAscmvZ/nvP3MLL/rDyKtvdKCv85hEzZ11Gm2rH9nXtCLAlwKJKvEI7VWDhNE4gMHkz0DEB6QiHQcoqQLbN0yDaireFYTpgGxSHzwN/LgYCoc5elwmjXRY88kOb/Tz68y5A/7pbTolcamzwAAAABJRU5ErkJggg==);' +
        '   background-size:100% 100%;' +
        '   transition: all 0.2s;' +
        '  -webkit-transition: all 0.2s;' +
        '  -moz-transition: all 0.2s;' +
        '  -o-transition: all 0.2s;' +
        ' }' +
        ' #drager:hover>div{' +
        '   background-color: rgba(0, 0, 0, 0.8);' +
        ' } ';
    document.body.appendChild(new_element_N);
    new_element_N = document.createElement('div');
    new_element_N.setAttribute("id", "drager");
    new_element_N.style.top = "0px";
    new_element_N.style.left = "20px";
    new_element_N.innerHTML = ' <div></div>';
    document.body.appendChild(new_element_N);
    var posX;
    var posY;
    var screenWidth = document.documentElement.clientWidth;
    var screenHeight = document.documentElement.clientHeight;
    var fdiv = document.getElementById("drager");
    fdiv.onmousedown = function (e) {
        fdiv.style.backgroundColor = "rgba(0, 0, 0, 0.2)"
        screenWidth = document.documentElement.clientWidth;
        screenHeight = document.documentElement.clientHeight;
        if (!e) { e = window.event; } //IE
        posX = e.clientX - parseInt(fdiv.style.left);
        posY = e.clientY - parseInt(fdiv.style.top);
        document.onmousemove = mousemove;
    }
    fdiv.touchstart = function () {
    }
    fdiv.onclick = function () {
        myAlert.style.display = 'block';
    }
    document.onmouseup = function ()//释放时自动贴到最近位置
    {
        document.onmousemove = null;
        if ((parseInt(fdiv.style.top) + parseInt(fdiv.clientHeight) / 2) <= (screenHeight / 2)) {//在上半部分
            if ((parseInt(fdiv.style.left) + parseInt(fdiv.clientWidth) / 2) <= (screenWidth / 2)) {//在左半部分
                if ((parseInt(fdiv.style.top) + parseInt(fdiv.clientHeight) / 2) <= (parseInt(fdiv.style.left) + parseInt(fdiv.clientWidth) / 2)) {//靠近上方
                    fdiv.style.top = "0px";
                } else {//靠近左边
                    fdiv.style.left = "0px";
                }
            } else {//在右半部分
                if ((parseInt(fdiv.style.top) + parseInt(fdiv.clientHeight) / 2) <= (screenWidth - (parseInt(fdiv.style.left) + parseInt(fdiv.clientWidth) / 2))) {//靠近上方
                    fdiv.style.top = "0px";
                } else {//靠近右边
                    fdiv.style.left = (screenWidth - parseInt(fdiv.clientWidth)) + "px";
                }
            }
        } else { //下半部分
            if ((parseInt(fdiv.style.left) + parseInt(fdiv.clientWidth) / 2) <= (screenWidth / 2)) {//在左半部分
                if ((screenHeight - (parseInt(fdiv.style.top) + parseInt(fdiv.clientHeight) / 2)) <= (parseInt(fdiv.style.left) + parseInt(fdiv.clientWidth) / 2)) {//靠近下方
                    fdiv.style.top = (screenHeight - parseInt(fdiv.clientHeight)) + "px";
                } else {//靠近左边
                    fdiv.style.left = "0px";
                }
            } else {//在右半部分
                if ((screenHeight - (parseInt(fdiv.style.top) + parseInt(fdiv.clientHeight) / 2)) <= (screenWidth - (parseInt(fdiv.style.left) + parseInt(fdiv.clientWidth) / 2))) {//靠近上方
                    fdiv.style.top = (screenHeight - parseInt(fdiv.clientHeight)) + "px";
                } else {//靠近右边
                    fdiv.style.left = (screenWidth - parseInt(fdiv.clientWidth)) + "px";
                }
            }
        }
        fdiv.style.backgroundColor = "rgba(0, 0, 0, 0.6)"
    }
    function mousemove(ev) {
        if (ev == null) { ev = window.event; }//IE
        if ((ev.clientY - posY) <= 0) {//超过顶部
            fdiv.style.top = "0px";
        } else if ((ev.clientY - posY) > (screenHeight - parseInt(fdiv.clientHeight))) {//超过底部
            fdiv.style.top = (screenHeight - parseInt(fdiv.clientHeight)) + "px";
        } else {
            fdiv.style.top = (ev.clientY - posY) + "px";
        }

        if ((ev.clientX - posX) <= 0) {//超过左边
            fdiv.style.left = "0px";
        } else if ((ev.clientX - posX) > (screenWidth - parseInt(fdiv.clientWidth))) {//超过右边
            fdiv.style.left = (screenWidth - parseInt(fdiv.clientWidth)) + "px";
        } else {
            fdiv.style.left = (ev.clientX - posX) + "px";
        }
    }
    window.onload = window.onresize = function () { //窗口大小改变事件
        screenWidth = document.documentElement.clientWidth;
        screenHeight = document.documentElement.clientHeight;
        if ((parseInt(fdiv.style.top) + parseInt(fdiv.clientHeight)) > screenHeight) {//窗口改变适应超出的部分
            fdiv.style.top = (screenHeight - parseInt(fdiv.clientHeight)) + "px";
        }
        if ((parseInt(fdiv.style.left) + parseInt(fdiv.clientWidth)) > screenWidth) {//窗口改变适应超出的部分
            fdiv.style.left = (screenWidth - parseInt(fdiv.clientWidth)) + "px";
        }
        document.onmouseup.apply()
    };
    fdiv.addEventListener('touchstart', fdiv.onmousedown, false);
    fdiv.addEventListener('touchmove', function (event) {
        // 如果这个元素的位置内只有一个手指的话
        if (event.targetTouches.length == 1) {
            event.preventDefault();// 阻止浏览器默认事件，重要 
            var touch = event.targetTouches[0];
            if ((touch.pageY) <= 0) {//超过顶部
                fdiv.style.top = "0px";
            } else if (touch.pageY > (screenHeight - parseInt(fdiv.clientHeight))) {//超过底部
                fdiv.style.top = (screenHeight - parseInt(fdiv.clientHeight)) + "px";
            } else {
                fdiv.style.top = (touch.pageY - parseInt(fdiv.clientHeight) / 2) + "px";
            }

            if (touch.pageX <= 0) {//超过左边
                fdiv.style.left = "0px";
            } else if (touch.pageX > (screenWidth - parseInt(fdiv.clientWidth))) {//超过右边
                fdiv.style.left = (screenWidth - parseInt(fdiv.clientWidth)) + "px";
            } else {
                fdiv.style.left = (touch.pageX - parseInt(fdiv.clientWidth) / 2) + "px";
            }
        }
    }, false);
    fdiv.addEventListener('touchend', document.onmouseup, false);    
</script>

</html>